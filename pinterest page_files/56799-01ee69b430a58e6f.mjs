"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[56799],{514843:(e,t,o)=>{o.d(t,{Z:()=>s});var a=o(616550),n=o(372991),i=o(538645);function s(){let e=(0,a.k6)(),t=(0,i.HG)();return o=>{t?(0,n.Z)(o,{disableOriginCheck:!0}):e.push(o)}}},128407:(e,t,o)=>{o.d(t,{Z:()=>a});let a=(e,t)=>{let o=new Date;return new Date(1e3*e)<=new Date(o.getFullYear()-(t||18),o.getMonth(),o.getDate())}},58564:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(785893);let n=({size:e=56})=>(0,a.jsxs)("svg",{display:"block",fill:"none",fillRule:"evenodd",height:e,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),(0,a.jsx)("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),(0,a.jsx)("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),(0,a.jsx)("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),(0,a.jsx)("path",{d:"M20 20h472v472H20V20z"})]})},578415:(e,t,o)=>{o.d(t,{Di:()=>s,E2:()=>c,Eh:()=>u,Jl:()=>a,R:()=>n,aU:()=>l,iu:()=>r,j2:()=>i,pN:()=>_});let a=1e4,n="permanent_account_closure",i="account_deletion_email_sent",s="account_deactivated",l="unlink_successful",r="lba_deprecation_personal_convert_account_message",c="lba_deprecation_business_convert_account_message",_="account_switch_to_settings",u="lba_deprecation_delete_account"},353401:(e,t,o)=>{o.d(t,{Z:()=>a});let a=e=>JSON.parse(decodeURIComponent(atob((e.split(".")[1]||"").replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))},479013:(e,t,o)=>{o.d(t,{Z:()=>i});var a=o(263815),n=o(112800);async function i(e){let t=await (0,a.Kw)(),o=t?{user_ids:Object.keys(t)}:{};(0,n.tj)(`mweb_multiple_accounts_${e}`,o)}},354214:(e,t,o)=>{o.d(t,{eN:()=>c,_:()=>u,kB:()=>_});var a=o(142212),n=o(857147),i=o(171764),s=o(616550);let l=["/resource/:name/:method/","/resource/commerce/:name/:method/","/:username/pins/follow/","/email/remove/","/about/trademark/:claim_type/","/about/copyright/dmca-pin/web-result/:id/","/about/copyright/dmca-pin/pin/:id/","/about/copyright/dmca-pin/","/about/koplg/","/about/:lawName/","/about/radtc/","/website/confirm/","/oauth/","/app-factory-oauth/","/settings/extension/uninstall/","/offsite/","/amp/(.*)"];var r=o(992114);let c=e=>e&&(0,n.Qg)(e)&&a.lfe!==e?(0,n.Qc)(e).relative:"/",_=(e,t)=>{let o=(0,n.Jx)(e);return((e,t)=>{let o=new URL(e,t);return l.some(e=>!!(0,s.LX)(o.pathname,{path:e,exact:!0}))})(o,t)||(0,i.Z)(o)===n.vx.TRUSTED_DIFFERENT_ORIGIN},u=({forceFullPageNavigation:e,history:t,next:o,noLocationReplace:a,origin:i})=>{let s=(0,n.Jx)(o);_(o,i)||!t||e?(e&&(0,r.nP)("webapp.duplo.navigateOnLogin.forceFullPageNavigation",{sampleRate:1}),window.location.assign(s)):a?t.push(c(s)):t.replace(c(s))}},129692:(e,t,o)=>{o.d(t,{Z:()=>w});var a=o(667294),n=o(20256),i=o(353401),s=o(91672),l=o(250964),r=o(967312),c=o(174646),_=o(112800),u=o(677316),p=o(58564),d=o(233846),g=o(116629),h=o(550082),m=o(785893);function b(){let e=(0,d.ZP)(),[t,o]=(0,a.useState)();return(0,g.q)()?null:(0,m.jsxs)(n.xu,{position:"relative",children:[(0,m.jsx)(n.iP,{onTap:()=>o(!0),children:(0,m.jsxs)(n.xu,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",position:"relative",rounding:"pill",children:[(0,m.jsx)(n.xu,{height:24,marginTop:1,width:24,children:(0,m.jsx)(p.Z,{size:20})}),(0,m.jsx)(n.xu,{marginStart:2,children:(0,m.jsx)(n.xv,{weight:"bold",children:e._('Connect with Google', 'googleConnectButtonWithDisabledSDK.buttonText', 'Connect with Google button text')})})]})}),t&&(0,m.jsx)(h.Z,{onDismiss:()=>o(!1),type:"google"})]})}function v({onGoogleConnectSuccess:e,onTouch:t}){let{locale:o}=(0,c.B)(),r=(0,a.useRef)(null),p=(0,l.l)(),d=(0,a.useRef)(e),g=(0,u.Z)();return(0,a.useEffect)(()=>{d.current=e},[e]),(0,a.useEffect)(()=>{let e=({credential:e,select_by:t})=>{(0,_.My)(`unauth_mweb.gsi_button.select_by.${t}`),(0,_.NC)("press_google_connect_button");let o=(0,i.Z)(e);d.current({google_open_id_token:e,autologin:!1},{type:"google",google_open_id_token:e,first_name:o.given_name,last_name:o.family_name,image_url:o.picture})};return(async()=>{await p?.ensureInit("button",e),(0,s.ru)({buttonRef:r,isDesktop:!1,locale:o,onTouch:t})})(),()=>{p?.removeButtonCallback(e)}},[p,o]),(0,m.jsx)(n.xu,{position:"relative",children:(0,m.jsx)(n.iP,{onTap:()=>{g({action:"click",item:"google-connect-button"}),(0,_.EX)({event:"start",provider:"google"})},children:(0,m.jsx)(n.xu,{"aria-label":"GOOGLE_SIGNIN_BUTTON",height:44,children:(0,m.jsx)(n.xu,{ref:r,width:"100%"})})})})}function w({onGoogleConnectSuccess:e,onTouch:t}){let{checkExperiment:o}=(0,r.r)(),{anyEnabled:a}=o("mweb_google_disabled");return a?(0,m.jsx)(b,{}):(0,m.jsx)(v,{onGoogleConnectSuccess:e,onTouch:t})}},999773:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(354357);let n=e=>new Set([...a.EU,...a.rT,...a.IO]).has(e)},523429:(e,t,o)=>{o.d(t,{f:()=>A,l:()=>I});var a=o(667294),n=o(545007),i=o(420205),s=o(578373),l=o(547504),r=o(219308),c=o(463227),_=o(977642),u=o(241321),p=o(911680),d=o(578415),g=o(281508),h=o(967312),m=o(700890),b=o(296743),v=o(174646),w=o(941925),x=o(943369),f=o(112800),y=o(104433),k=o(892249),E=o(479013),C=o(354214),P=o(804626),Z=o(749642),j=o(79947),T=o(873874),R=o(992114);let D=e=>({type:"AUTHENTICATE_USER",payload:{user:e}}),A=()=>{let e=(0,r.Z)(),t=(0,h.r)(),o=(0,n.I0)(),{country:A,countryFromHostName:I,countryFromIp:S,regionFromIp:z,userAgent:{isTablet:O,isMobile:M}}=(0,v.B)(),H=(0,m.Z)(),N=(0,y.Z)();return(0,a.useCallback)(async(a,n,r="/",h={isAutologin:!1,isSwitchAccount:!1,noLocationReplace:!1,recaptchaV3Token:"default",noImmediateRedirect:!1,useAlternativeResourceCall:!1,trigger:"other",accountUnlinked:!1},m)=>{H();let v=!O&&!M,{isAutologin:y,isSwitchAccount:F,noLocationReplace:G,recaptchaV3Token:U,noImmediateRedirect:B,useAlternativeResourceCall:L,trigger:X,accountUnlinked:Y}=h;(0,x.M0)().setItem(l.V6,(0,g.nY)(a));let K=t=>{e({...m,event_type:t,aux_data:{...m.aux_data,upsell_reason:m.aux_data?.upsell_reason||(y?"autologin":(0,x.M0)().getItem(l.bg)),upsell_view_count:(0,x.M0)().getItem(l.w0)??0}}),7536===t&&(0,x.M0)().setItem(l.w0,0)},J={get_user:!0,...a,app_type_from_client:6,recaptchaV3Token:U},V=(0,j.t_)();V&&(J={...J,visited_pages_before_login:V});let q=(0,P.O)();q&&(J={...J,referrer:q});let $=s.Z.create("UserSessionResource",J).callCreate();if(L&&a.username_or_email&&a.password){let e=new FormData;e.append("username",a.username_or_email),e.append("password",a.password),$=fetch("/resource/UserSessionResource/create/",{method:"POST",body:e,credentials:"include",headers:{Accept:"application/json, text/javascript, */*","X-CSRFToken":(0,_._V)()||"","X-Requested-With":"XMLHttpRequest","X-Pinterest-PWS-Handler":(0,T.H)()||""}}).then(e=>{if(200!==e.status)throw Error(e.statusText);return e.json()}).catch(e=>((0,f.dy)({event:"login_api_call_failure",provider:"email"}),Promise.reject(e)))}try{y?(0,f.dy)({event:"login_api_call_start",provider:a.google_open_id_token?"google":"facebook"}):(0,f.EX)({event:"login_api_call_start",provider:(0,g.nY)(a)}),K(7534),N({action:y?"autologin":"login",event:"attempt",type:(0,g.lp)(a),trigger:X});let e=await $;y?(0,f.dy)({event:"login_api_call_success",provider:a.google_open_id_token?"google":"facebook"}):(0,f.EX)({event:"login_api_call_success",provider:(0,g.nY)(a)}),o(D(e.resource_response.data.user));let s=e.client_context,_=e.resource_response.data.user.gatekeeper_experiments;if(_){let{active:e,triggerable:o}=_;e&&o||(0,R.nP)("webapp.authentication.emptyExperimentsDebug",{sampleRate:1,tags:{active:String(!!e),triggerable:String(!!o)}}),t.updateExperiments(e,o)}else(0,R.nP)("webapp.authentication.updateExperimentsFailed");s&&s.placed_experiences&&o((0,u.OD)(s.placed_experiences)),(0,E.Z)("authentication.login_success"),g.ZP.storeLoginCredentialsToBrowser(a),K(7536),N({action:y?"autologin":"login",event:"success",type:(0,g.lp)(a),trigger:X}),(0,p.Z)(),c.zN(i.e7.name),c.zN(i.x3.name),(0,x.M0)().setItem(l.xs,1),"/"!==r&&(0,Z.E)(!0),F?(0,w.Z)().then(()=>{let t=`/${e.resource_response.data?.user.username||""}`+(Y?`?message=${d.aU}`:"");window.location.href=t}):y&&!v||B||(!a.google_open_id_token&&v&&t.checkExperiment("dweb_arr_modal_post_fb_login").anyEnabled&&(0,k.I9)(),(0,C._)({forceFullPageNavigation:v,history:n,next:r,noLocationReplace:G,origin:window.location.toString()})),"facebook"===(0,g.nY)(a)&&!v&&t.checkExperiment("mweb_arr_modal_post_fb_login").anyEnabled&&(0,k.I9)(),(0,b.ko)({country:A,countryFromHostName:I,countryFromIp:S,regionFromIp:z,deviceType:"Mobile",eventCategory:"Logins"})}catch(e){if(y?(0,f.dy)({event:"login_api_call_failure",provider:a.google_open_id_token?"google":"facebook"}):(0,f.EX)({event:"login_api_call_failure",provider:(0,g.nY)(a)}),1201!==e.api_error_code||y||v)throw K(7535),N({action:y?"autologin":"login",event:"fail",type:(0,g.lp)(a),trigger:X}),F&&(0,E.Z)("authentication.login_error"),e;if(n){let t={creds:a,next:r,phoneNumber:e?.data?.phone_number_end};n.push({pathname:"/login/mfa/",state:t})}}},[o,A,I,S,H,t,M,O,e,z,N])},I=()=>{let e=(0,h.r)(),t=(0,n.I0)(),o=(0,m.Z)();return({client_context:a,resource_response:n})=>{let{data:i}=n;i&&(o(),t(D(i.user)));let s=i.user.gatekeeper_experiments;if(s){let{active:t,triggerable:o}=s;t&&o||(0,R.nP)("webapp.crossDomainAutologin.emptyExperimentsDebug",{sampleRate:1,tags:{active:String(!!t),triggerable:String(!!o)}}),e.updateExperiments(t,o)}else(0,R.nP)("webapp.crossDomainAutologin.updateExperimentsFailed");a&&t((0,u.OD)(a.placed_experiences))}}},296413:(e,t,o)=>{o.d(t,{m:()=>R});var a=o(545007),n=o(420205),i=o(578373),s=o(547504),l=o(203728),r=o(219308),c=o(463227),_=o(18644),u=o(241321),p=o(911680),d=o(253473),g=o(693806),h=o(215907),m=o(967312),b=o(700890),v=o(296743),w=o(174646),x=o(941925),f=o(943369),y=o(112800),k=o(104433),E=o(279619),C=o(479013),P=o(804626),Z=o(999773),j=o(79947),T=o(992114);let R=()=>{let e=(0,m.r)(),t=(0,a.I0)(),{country:o,countryFromHostName:R,countryFromIp:D,regionFromIp:A,isAuthenticated:I}=(0,w.B)(),S=(0,b.Z)(),z=(0,r.Z)(),O=(0,k.Z)(),{isRequirementEnabled:M}=(0,E.yp)();return(a,{signupAttemptContextEvent:r})=>{let m=(0,h.yV)(a),b=(0,f.M0)(),w=e=>{z({...r,event_type:e,aux_data:{...r.aux_data,upsell_reason:r.aux_data?.upsell_reason||b.getItem(s.bg)||null,upsell_view_count:b.getItem(s.w0)||0}}),7487===e&&b.setItem(s.w0,0)};w(7537),O({action:"signup",event:"attempt",type:m}),S();let k=0,E=(0,Z.Z)(o),H=new Promise(e=>{E?setTimeout(()=>{e(void 0)},3e3):e(void 0)});return new Promise((s,r)=>{let b=()=>{let f=(0,j.t_)(),E=(0,P.O)(),Z={...a,user_behavior_data:JSON.stringify({}),visited_pages:f},S=(0,d.Z)({isComplianceFeatureRequired:M,viewType:10});S.length>0&&(Z={...Z,privacy_disclaimer_acknowledge:S}),E&&(Z={...Z,referrer:E}),(0,T.nP)("webapp.debug_signup_type.redux_registration",{sampleRate:1,tags:{CHECK_TYPE:(0,h.Eh)(Z,"CHECK_TYPE")??"none",CHECK_EXISTS:(0,h.Eh)(Z,"DEPRECATED_CHECK_EXISTS"),CHECK_TRUTHY:(0,h.Eh)(Z,"DEPRECATED_CHECK_TRUTHY")}}),i.Z.create("UserRegisterResource",{...Z,get_user:!0}).callCreate().then(n=>H.then(()=>{let i=n.client_context;t({type:"REGISTER_USER",payload:{user:n.resource_response.data.user}});let r=n.resource_response.data.user.gatekeeper_experiments;if(r){let{active:t,triggerable:o}=r;t&&o||(0,T.nP)("webapp.registration.emptyExperimentsDebug",{sampleRate:1,tags:{active:String(!!t),triggerable:String(!!o)}}),e.updateExperiments(t,o)}else(0,T.nP)("webapp.registration.updateExperimentsFailed");i&&i.placed_experiences&&t((0,u.OD)(i.placed_experiences)),I&&(0,C.Z)("registration.signup_success");let{email:c,username:_,password:d}=a,g=c||_||null,h=d||null,{credentials:b}=navigator;if(b&&g&&h)try{let e=new window.PasswordCredential({id:g,password:h});(0,y.My)("unauth_mweb.navigatorCredentials.store.attempt"),b.store(e).then(()=>{(0,y.My)("unauth_mweb.navigatorCredentials.store.success")})}catch(e){(0,y.My)("unauth_mweb.navigatorCredentials.store.error")}w(7487),O({action:"signup",event:"success",type:m}),(0,l.Z)(),(0,p.Z)(!0),I&&(0,x.Z)(),(0,v.ko)({country:o,countryFromHostName:R,countryFromIp:D,regionFromIp:A,deviceType:"Mobile",eventCategory:"NewUsers"}),s()})).catch(e=>{let t=(0,_.Z)(e,"api_error_code");t===g.tz&&((0,y.My)("multi_step_set_age_restrict_cookie"),c.t8(n.It,"1",(0,c.kZ)(n.It))),k<3&&[g.dO,g.cZ].includes(t??0)?(k+=1,b()):(w(7488),O({action:"signup",event:"fail",type:m}),I&&(0,C.Z)("registration.signup_error"),r(e))})};b()})}}},550082:(e,t,o)=>{o.d(t,{Z:()=>l});var a=o(20256),n=o(852015),i=o(233846),s=o(785893);function l({type:e,onDismiss:t}){let o=(0,i.ZP)(),l="facebook"===e?o._('Oops! Facebook isn\'t available', 'socialAuthDisabled.facebook.title', 'Title for the modal shown when Facebook services are not working'):o._('Oops! Google isn\'t available', 'socialAuthDisabled.google.title', 'Title for the modal shown when Google services are not working'),r="facebook"===e?o._(`Looks like Facebook isn't available right now.

Give another option a try or refresh the page and try again later.`, 'socialAuthDisabled.facebook.description', 'Description for the modal shown when Facebook services are not working'):o._(`Looks like Google isn't available right now.

Give another option a try or refresh the page and try again later.`, 'socialAuthDisabled.google.description', 'Description for the modal shown when Google services are not working');return(0,s.jsx)(n.ZP,{accessibilityModalLabel:"",isOpen:!0,mobileHideCloseIcon:!0,onDismiss:t,type:"social_auth_disabled_modal",children:(0,s.jsxs)(a.xu,{padding:5,children:[(0,s.jsx)(a.xu,{marginBottom:3,children:(0,s.jsx)(a.X6,{accessibilityLevel:1,size:"600",children:l})}),(0,s.jsx)(a.xu,{marginBottom:3,children:(0,s.jsx)(a.xv,{children:r})}),(0,s.jsx)(a.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:(0,s.jsx)(a.xu,{paddingY:1,children:(0,s.jsx)(a.zx,{accessibilityLabel:o._('OK', 'socialAuthDisabled.okButton', 'Button that closes modal shown when Facebook or Google services are not working'),color:"red",onClick:t,size:"lg",text:o._('OK', 'socialAuthDisabled.okButton', 'Button that closes modal shown when Facebook or Google services are not working')})})})]})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/56799-01ee69b430a58e6f.mjs.map